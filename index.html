<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Apple Vision Pro - –í–•–û–î –í –í–† –†–ï–ñ–ò–ú</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, 'SF Pro Display', sans-serif;
            background: black;
        }

        /* –≠–ö–†–ê–ù –í–•–û–î–ê –í –í–† */
        #entry-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a, #000000);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20000;
            color: white;
            transition: opacity 1s;
        }

        .vision-logo {
            font-size: 100px;
            margin-bottom: 30px;
            animation: float 3s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .entry-title {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ff2d55, #0a84ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .entry-subtitle {
            font-size: 20px;
            color: rgba(255,255,255,0.7);
            margin-bottom: 50px;
        }

        .permission-status {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-radius: 50px;
            margin-bottom: 30px;
            font-size: 18px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .permission-status.active {
            background: rgba(48, 209, 88, 0.2);
            border-color: #30d158;
        }

        .enter-vr-btn {
            background: linear-gradient(135deg, #ff2d55, #0a84ff);
            border: none;
            color: white;
            font-size: 32px;
            font-weight: 600;
            padding: 25px 80px;
            border-radius: 70px;
            margin-top: 30px;
            cursor: pointer;
            transform: scale(1);
            transition: all 0.3s;
            box-shadow: 0 20px 40px rgba(255,45,85,0.3);
            opacity: 0.5;
            pointer-events: none;
        }

        .enter-vr-btn.active {
            opacity: 1;
            pointer-events: auto;
            animation: pulse 2s infinite;
        }

        .enter-vr-btn:active {
            transform: scale(0.95);
        }

        @keyframes pulse {
            0% { box-shadow: 0 20px 40px rgba(255,45,85,0.3); }
            50% { box-shadow: 0 30px 60px rgba(10,132,255,0.5); }
            100% { box-shadow: 0 20px 40px rgba(255,45,85,0.3); }
        }

        .camera-preview {
            width: 200px;
            height: 150px;
            border-radius: 30px;
            overflow: hidden;
            margin: 20px 0;
            border: 3px solid rgba(255,255,255,0.3);
        }

        #preview-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* –û–°–ù–û–í–ù–û–ô –í–†-–ò–ù–¢–ï–†–§–ï–ô–° */
        #vr-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s;
        }

        #vr-container.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* –°–¢–ï–†–ï–û –†–ê–ó–î–ï–õ–ï–ù–ò–ï –î–õ–Ø CARDBOARD */
        #stereo-container {
            display: flex;
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .eye {
            flex: 1;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .left-eye {
            border-right: 3px solid rgba(255,255,255,0.2);
        }

        .camera-feed {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        .eye-interface {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .ui-content {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* –°–¢–ê–¢–£–° –ë–ê–† */
        .status-bar {
            position: absolute;
            top: 30px;
            left: 0;
            width: 100%;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            color: white;
            font-size: 20px;
            font-weight: 600;
            text-shadow: 0 2px 10px black;
            z-index: 100;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù */
        .home-screen {
            position: absolute;
            bottom: 150px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 20px;
            z-index: 200;
        }

        .app-icon {
            width: 160px;
            height: 180px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 60px;
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: white;
            font-size: 20px;
            transition: all 0.3s;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            pointer-events: none;
        }

        .app-emoji {
            font-size: 70px;
        }

        .app-icon.hovering {
            transform: scale(1.15) translateY(-15px);
            border-color: #0a84ff;
            box-shadow: 0 40px 80px #0a84ff80;
            background: rgba(10,132,255,0.2);
        }

        .app-icon.pinching {
            transform: scale(0.9);
            background: #0a84ff;
        }

        /* –î–û–ö */
        .dock {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 25px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(50px);
            -webkit-backdrop-filter: blur(50px);
            padding: 20px 40px;
            border-radius: 80px;
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 250;
        }

        .dock-icon {
            width: 70px;
            height: 70px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            transition: all 0.3s;
            border: 2px solid transparent;
            pointer-events: none;
        }

        .dock-icon.hovering {
            border-color: #ff9f0a;
            transform: translateY(-10px) scale(1.1);
            box-shadow: 0 0 40px #ff9f0a;
        }

        /* –û–ö–ù–ê */
        .app-window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: min(800px, 85%);
            height: min(550px, 65%);
            background: rgba(20, 20, 30, 0.9);
            backdrop-filter: blur(60px);
            -webkit-backdrop-filter: blur(60px);
            border-radius: 80px;
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            z-index: 1000;
            display: none;
            animation: openWindow 0.4s;
            box-shadow: 0 60px 120px rgba(0,0,0,0.8);
            pointer-events: none;
        }

        @keyframes openWindow {
            from { transform: translate(-50%, -50%) scale(0.7); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .window-header {
            padding: 30px 40px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 28px;
        }

        .close-btn {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            pointer-events: none;
        }

        .close-btn.hovering {
            background: #ff3b30;
            transform: scale(1.1);
        }

        /* –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –†–£–ö */
        .hand-visual {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 10000;
            display: none;
            transition: all 0.1s;
            backdrop-filter: blur(5px);
        }

        #left-hand-visual {
            border: 4px solid #ff9f0a;
            box-shadow: 0 0 60px #ff9f0a;
            background: rgba(255,159,10,0.1);
        }

        #right-hand-visual {
            border: 4px solid #0a84ff;
            box-shadow: 0 0 60px #0a84ff;
            background: rgba(10,132,255,0.1);
        }

        .hand-visual.pinching {
            width: 70px;
            height: 70px;
            background: currentColor;
            opacity: 0.3;
        }

        /* –ò–ù–î–ò–ö–ê–¢–û–†–´ */
        #vr-info {
            position: absolute;
            bottom: 200px;
            right: 40px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(30px);
            padding: 25px;
            border-radius: 50px;
            color: white;
            z-index: 500;
            border: 1px solid rgba(255,255,255,0.2);
            min-width: 280px;
        }

        .hand-indicator {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }

        .indicator-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #444;
        }

        .indicator-dot.left.active { background: #ff9f0a; box-shadow: 0 0 30px #ff9f0a; }
        .indicator-dot.right.active { background: #0a84ff; box-shadow: 0 0 30px #0a84ff; }

        #gyro-info {
            position: absolute;
            top: 150px;
            right: 40px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(30px);
            padding: 15px 30px;
            border-radius: 40px;
            color: white;
            z-index: 500;
        }
    </style>
</head>
<body>
    <!-- –≠–ö–†–ê–ù –í–•–û–î–ê –í –í–† -->
    <div id="entry-screen">
        <div class="vision-logo">üï∂Ô∏è</div>
        <div class="entry-title">Apple Vision Pro</div>
        <div class="entry-subtitle">–î–ª—è Cardboard –∏ iPhone</div>
        
        <div class="camera-preview">
            <video id="preview-video" autoplay playsinline muted></video>
        </div>
        
        <div class="permission-status" id="permission-status">
            ‚è≥ –ó–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ...
        </div>
        
        <div id="hands-check" style="margin: 20px 0; font-size: 24px;">
            ‚úã –û–∂–∏–¥–∞–Ω–∏–µ —Ä—É–∫...
        </div>
        
        <button class="enter-vr-btn" id="enter-vr-btn">
            üöÄ –í–û–ô–¢–ò –í –í–† –†–ï–ñ–ò–ú
        </button>
        
        <div style="margin-top: 40px; color: rgba(255,255,255,0.5);">
            –ü–æ–ª–æ–∂–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ Cardboard –∏ –ø—Ä–æ—Ç—è–Ω–∏ —Ä—É–∫–∏
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –í–†-–ò–ù–¢–ï–†–§–ï–ô–° -->
    <div id="vr-container">
        <div id="stereo-container">
            <div class="eye left-eye">
                <video class="camera-feed" id="camera-left" autoplay playsinline></video>
                <div class="eye-interface" id="interface-left"></div>
            </div>
            <div class="eye">
                <video class="camera-feed" id="camera-right" autoplay playsinline></video>
                <div class="eye-interface" id="interface-right"></div>
            </div>
        </div>

        <!-- –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –†–£–ö -->
        <div class="hand-visual" id="left-hand-visual"></div>
        <div class="hand-visual" id="right-hand-visual"></div>

        <!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
        <div id="vr-info">
            <div class="hand-indicator">
                <span class="indicator-dot left" id="left-indicator"></span>
                <span>–õ–µ–≤–∞—è —Ä—É–∫–∞: <span id="left-gesture">‚úã</span></span>
            </div>
            <div class="hand-indicator">
                <span class="indicator-dot right" id="right-indicator"></span>
                <span>–ü—Ä–∞–≤–∞—è —Ä—É–∫–∞: <span id="right-gesture">‚úã</span></span>
            </div>
            <div style="margin-top: 15px;" id="action-message">–°–¥–µ–ª–∞–π —â–∏–ø–æ–∫ –ø–∞–ª—å—Ü–∞–º–∏</div>
        </div>

        <div id="gyro-info">
            üåÄ <span id="gyro-values">0¬∞ 0¬∞</span>
        </div>
    </div>

    <!-- –®–ê–ë–õ–û–ù –ò–ù–¢–ï–†–§–ï–ô–°–ê -->
    <div id="ui-template" style="display: none;">
        <div class="ui-content">
            <div class="status-bar">
                <span class="time-display">10:30</span>
                <span>üîã 100% ‚Ä¢ Apple Vision Pro</span>
            </div>

            <div class="home-screen">
                <div class="app-icon" data-app="photos">
                    <span class="app-emoji">üì∏</span>
                    <span>–§–æ—Ç–æ</span>
                </div>
                <div class="app-icon" data-app="safari">
                    <span class="app-emoji">üåê</span>
                    <span>Safari</span>
                </div>
                <div class="app-icon" data-app="music">
                    <span class="app-emoji">üéµ</span>
                    <span>–ú—É–∑—ã–∫–∞</span>
                </div>
                <div class="app-icon" data-app="ar">
                    <span class="app-emoji">üï∂Ô∏è</span>
                    <span>AR –ú–∏—Ä</span>
                </div>
            </div>

            <div class="dock">
                <div class="dock-icon" data-app="photos">üì∏</div>
                <div class="dock-icon" data-app="safari">üåê</div>
                <div class="dock-icon" data-app="music">üéµ</div>
                <div class="dock-icon" data-app="ar">üï∂Ô∏è</div>
                <div class="dock-icon" data-app="settings">‚öôÔ∏è</div>
            </div>
        </div>
    </div>

    <!-- –û–ö–ù–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–ô -->
    <div id="windows-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2000;">
        <div class="app-window" id="window-photos">
            <div class="window-header">
                <span>üì∏ –§–æ—Ç–æ</span>
                <span class="close-btn" data-close="photos">‚úï</span>
            </div>
            <div class="window-content" style="display: grid; grid-template-columns: repeat(3,1fr); gap: 20px;">
                <img src="https://picsum.photos/200/200?random=1" style="width:100%; border-radius:25px;">
                <img src="https://picsum.photos/200/200?random=2" style="width:100%; border-radius:25px;">
                <img src="https://picsum.photos/200/200?random=3" style="width:100%; border-radius:25px;">
            </div>
        </div>

        <div class="app-window" id="window-safari">
            <div class="window-header">
                <span>üåê Safari</span>
                <span class="close-btn" data-close="safari">‚úï</span>
            </div>
            <div class="window-content">
                <iframe src="https://www.apple.com" style="width:100%; height:100%; border:none; border-radius:30px;"></iframe>
            </div>
        </div>

        <div class="app-window" id="window-music">
            <div class="window-header">
                <span>üéµ –ú—É–∑—ã–∫–∞</span>
                <span class="close-btn" data-close="music">‚úï</span>
            </div>
            <div class="window-content" style="text-align:center;">
                <div style="font-size:100px; margin:40px;">üéµ</div>
                <h3>–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç</h3>
                <p>Track Name - Artist</p>
            </div>
        </div>

        <div class="app-window" id="window-ar">
            <div class="window-header">
                <span>üï∂Ô∏è AR –ú–∏—Ä</span>
                <span class="close-btn" data-close="ar">‚úï</span>
            </div>
            <div class="window-content">
                <div style="width:200px; height:200px; margin:0 auto; background:linear-gradient(135deg, #ff2d55, #0a84ff); border-radius:50%; animation: float 3s infinite;"></div>
            </div>
        </div>

        <div class="app-window" id="window-settings">
            <div class="window-header">
                <span>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                <span class="close-btn" data-close="settings">‚úï</span>
            </div>
            <div class="window-content">
                <p>üì∑ –í–† —Ä–µ–∂–∏–º: –ê–ö–¢–ò–í–ï–ù</p>
                <p>üñêÔ∏è –¢—Ä–µ–∫–∏–Ω–≥ —Ä—É–∫: –†–∞–±–æ—Ç–∞–µ—Ç</p>
                <p>üëì Cardboard: –ì–æ—Ç–æ–≤</p>
            </div>
        </div>
    </div>

    <script>
        // ========== –°–û–°–¢–û–Ø–ù–ò–ï ==========
        let cameraReady = false;
        let handsDetected = false;
        let currentApp = null;
        
        let handData = {
            left: { x: 0, y: 0, pinch: false, detected: false },
            right: { x: 0, y: 0, pinch: false, detected: false }
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const entryScreen = document.getElementById('entry-screen');
        const vrContainer = document.getElementById('vr-container');
        const permissionStatus = document.getElementById('permission-status');
        const handsCheck = document.getElementById('hands-check');
        const enterBtn = document.getElementById('enter-vr-btn');
        const previewVideo = document.getElementById('preview-video');

        // ========== –ó–ê–ü–†–û–° –ö–ê–ú–ï–†–´ ==========
        async function requestCamera() {
            try {
                permissionStatus.innerHTML = 'üì∑ –ó–∞–ø—Ä–∞—à–∏–≤–∞—é –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ...';
                
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: 'environment',
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    } 
                });
                
                // –ü—Ä–µ–≤—å—é –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Ö–æ–¥–∞
                previewVideo.srcObject = stream;
                await previewVideo.play();
                
                // –í–∏–¥–µ–æ –¥–ª—è –í–† —Ä–µ–∂–∏–º–∞
                document.getElementById('camera-left').srcObject = stream;
                document.getElementById('camera-right').srcObject = stream;
                
                cameraReady = true;
                permissionStatus.innerHTML = '‚úÖ –ö–∞–º–µ—Ä–∞ –≥–æ—Ç–æ–≤–∞!';
                permissionStatus.classList.add('active');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º —ç–º—É–ª—è—Ü–∏—é —Ç—Ä–µ–∫–∏–Ω–≥–∞ —Ä—É–∫
                startHandEmulation();
                
                return stream;
            } catch (err) {
                console.error('Camera error:', err);
                permissionStatus.innerHTML = '‚ùå –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ!';
                permissionStatus.style.background = 'rgba(255,59,48,0.2)';
            }
        }

        // ========== –≠–ú–£–õ–Ø–¶–ò–Ø –¢–†–ï–ö–ò–ù–ì–ê –†–£–ö ==========
        function startHandEmulation() {
            // –≠–º—É–ª–∏—Ä—É–µ–º –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä—É–∫ —á–µ—Ä–µ–∑ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏/–ø–∞–ª—å—Ü–∞
            document.addEventListener('mousemove', (e) => {
                if (!cameraReady) return;
                
                // –≠–º—É–ª–∏—Ä—É–µ–º –ø—Ä–∞–≤—É—é —Ä—É–∫—É
                handData.right.detected = true;
                handData.right.x = e.clientX;
                handData.right.y = e.clientY;
                
                // –°–ª—É—á–∞–π–Ω–æ —ç–º—É–ª–∏—Ä—É–µ–º –ª–µ–≤—É—é —Ä—É–∫—É
                if (Math.random() > 0.7) {
                    handData.left.detected = true;
                    handData.left.x = e.clientX - 200;
                    handData.left.y = e.clientY - 50;
                }
                
                updateHandsDisplay();
            });

            // –≠–º—É–ª—è—Ü–∏—è —â–∏–ø–∫–∞ (–ø—Ä–æ–±–µ–ª –∏–ª–∏ –∫–ª–∏–∫)
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    handData.right.pinch = true;
                    setTimeout(() => {
                        handData.right.pinch = false;
                    }, 200);
                    handlePinch('right', handData.right.x, handData.right.y);
                }
            });

            document.addEventListener('click', (e) => {
                handData.right.pinch = true;
                setTimeout(() => {
                    handData.right.pinch = false;
                }, 200);
                handlePinch('right', e.clientX, e.clientY);
            });

            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —ç–º—É–ª–∏—Ä—É–µ–º –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            setInterval(() => {
                if (cameraReady) {
                    handsDetected = true;
                    handsCheck.innerHTML = 'üñêÔ∏è –†—É–∫–∏ –Ω–∞–π–¥–µ–Ω—ã!';
                    handsCheck.style.color = '#30d158';
                    enterBtn.classList.add('active');
                }
            }, 2000);
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –†–£–ö ==========
        function updateHandsDisplay() {
            const leftVis = document.getElementById('left-hand-visual');
            const rightVis = document.getElementById('right-hand-visual');
            const leftInd = document.getElementById('left-indicator');
            const rightInd = document.getElementById('right-indicator');
            const leftGest = document.getElementById('left-gesture');
            const rightGest = document.getElementById('right-gesture');

            // –õ–µ–≤–∞—è —Ä—É–∫–∞
            if (handData.left.detected) {
                leftVis.style.display = 'block';
                leftVis.style.left = handData.left.x + 'px';
                leftVis.style.top = handData.left.y + 'px';
                leftVis.classList.toggle('pinching', handData.left.pinch);
                leftInd.classList.add('active');
                leftGest.textContent = handData.left.pinch ? 'ü§è' : '‚úã';
            } else {
                leftVis.style.display = 'none';
                leftInd.classList.remove('active');
                leftGest.textContent = '‚úã';
            }

            // –ü—Ä–∞–≤–∞—è —Ä—É–∫–∞
            if (handData.right.detected) {
                rightVis.style.display = 'block';
                rightVis.style.left = handData.right.x + 'px';
                rightVis.style.top = handData.right.y + 'px';
                rightVis.classList.toggle('pinching', handData.right.pinch);
                rightInd.classList.add('active');
                rightGest.textContent = handData.right.pinch ? 'ü§è' : '‚úã';
            } else {
                rightVis.style.display = 'none';
                rightInd.classList.remove('active');
                rightGest.textContent = '‚úã';
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –∏–∫–æ–Ω–∫–∏
            checkHover();
        }

        // ========== –ü–†–û–í–ï–†–ö–ê –ù–ê–í–ï–î–ï–ù–ò–Ø ==========
        function checkHover() {
            document.querySelectorAll('.app-icon, .dock-icon, .close-btn').forEach(el => {
                el.classList.remove('hovering');
            });

            ['left', 'right'].forEach(hand => {
                if (handData[hand].detected) {
                    const element = document.elementFromPoint(handData[hand].x, handData[hand].y);
                    if (element) {
                        const hoverable = element.closest('.app-icon, .dock-icon, .close-btn');
                        if (hoverable) {
                            hoverable.classList.add('hovering');
                        }
                    }
                }
            });
        }

        // ========== –û–ë–†–ê–ë–û–¢–ö–ê –©–ò–ü–ö–ê ==========
        function handlePinch(hand, x, y) {
            const element = document.elementFromPoint(x, y);
            if (element) {
                const clickable = element.closest('[data-app], [data-close]');
                if (clickable) {
                    // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                    clickable.style.transform = 'scale(0.8)';
                    setTimeout(() => clickable.style.transform = '', 200);
                    
                    // –í–∏–±—Ä–∞—Ü–∏—è
                    if (window.navigator.vibrate) {
                        window.navigator.vibrate(20);
                    }
                    
                    document.getElementById('action-message').textContent = `üëÜ –©–∏–ø–æ–∫: ${hand} —Ä—É–∫–∞`;
                    
                    // –û—Ç–∫—Ä—ã–≤–∞–µ–º/–∑–∞–∫—Ä—ã–≤–∞–µ–º
                    if (clickable.hasAttribute('data-app')) {
                        openApp(clickable.getAttribute('data-app'));
                    } else if (clickable.hasAttribute('data-close')) {
                        closeApp(clickable.getAttribute('data-close'));
                    }
                }
            }
        }

        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø–ú–ò ==========
        function openApp(appName) {
            if (currentApp === appName) {
                closeApp(appName);
                return;
            }
            
            if (currentApp) {
                document.getElementById(`window-${currentApp}`).style.display = 'none';
            }
            
            const window = document.getElementById(`window-${appName}`);
            if (window) {
                window.style.display = 'block';
                currentApp = appName;
                document.getElementById('action-message').textContent = `üì± –û—Ç–∫—Ä—ã—Ç–æ: ${appName}`;
            }
        }

        function closeApp(appName) {
            const window = document.getElementById(`window-${appName}`);
            if (window) {
                window.style.display = 'none';
                if (currentApp === appName) {
                    currentApp = null;
                }
                document.getElementById('action-message').textContent = `‚ùå –ó–∞–∫—Ä—ã—Ç–æ: ${appName}`;
            }
        }

        // ========== –í–•–û–î –í –í–† –†–ï–ñ–ò–ú ==========
        function enterVR() {
            if (!cameraReady) return;
            
            // –ö–æ–ø–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –æ–±–∞ –≥–ª–∞–∑–∞
            const template = document.getElementById('ui-template').innerHTML;
            document.getElementById('interface-left').innerHTML = template;
            document.getElementById('interface-right').innerHTML = template;
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∏–¥–µ–æ –≤ –æ–±–æ–∏—Ö –≥–ª–∞–∑–∞—Ö
            document.getElementById('camera-left').play();
            document.getElementById('camera-right').play();
            
            // –ü–ª–∞–≤–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è
            entryScreen.style.opacity = '0';
            setTimeout(() => {
                entryScreen.style.display = 'none';
                vrContainer.classList.add('active');
            }, 1000);
        }

        // ========== –ì–ò–†–û–°–ö–û–ü ==========
        function initGyroscope() {
            if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', (event) => {
                    const beta = Math.round(event.beta || 0);
                    const gamma = Math.round(event.gamma || 0);
                    document.getElementById('gyro-values').textContent = `${beta}¬∞ ${gamma}¬∞`;
                });
            }
        }

        // ========== –í–†–ï–ú–Ø ==========
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            document.querySelectorAll('.time-display').forEach(el => {
                el.textContent = timeStr;
            });
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        window.onload = function() {
            requestCamera();
            initGyroscope();
            setInterval(updateTime, 1000);
            updateTime();
            
            // –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞
            enterBtn.addEventListener('click', enterVR);
            
            // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —â–∏–ø–∫–æ–≤
            setInterval(() => {
                if (handData.left.pinch) handlePinch('left', handData.left.x, handData.left.y);
                if (handData.right.pinch) handlePinch('right', handData.right.x, handData.right.y);
            }, 100);
        };
    </script>
</body>
</html>
